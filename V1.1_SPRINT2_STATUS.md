# 🔄 InsuraTask v1.1 - Sprint 2 Status Report
**Data: 6 Giugno 2025**  
**Branch**: `v1.1-sprint2`  
**Focus**: Templates Attività Ricorrenti

## 🎯 **Obiettivi Sprint 2**

### 🔄 **Templates Attività Ricorrenti**
- [ ] **Backend Infrastructure**:
  - [ ] Database schema per templates
  - [ ] API endpoints per CRUD templates
  - [ ] Sistema di ricorrenze con node-cron
  - [ ] Engine per placeholder dinamici

- [ ] **Frontend Components**:
  - [ ] TemplateManager.tsx - Lista e gestione template
  - [ ] TemplateEditor.tsx - Creazione/modifica template
  - [ ] RecurrenceScheduler.tsx - Configurazione ricorrenze
  - [ ] Integrazione con TaskModal esistente

- [ ] **Features Principali**:
  - [ ] Template salvabili con placeholder
  - [ ] Scheduling automatico (daily/weekly/monthly)
  - [ ] Auto-creazione attività da template
  - [ ] UI per gestione template

## 🏗️ **Architettura da Implementare**

### Database Schema
```sql
-- Templates table
CREATE TABLE templates (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  name TEXT NOT NULL,
  description TEXT,
  category TEXT NOT NULL,
  title_template TEXT NOT NULL,
  description_template TEXT,
  priority TEXT DEFAULT 'medium',
  recurrence_config TEXT, -- JSON: {type, interval, days, time}
  is_active BOOLEAN DEFAULT 1,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- Template instances (attività generate)
CREATE TABLE template_instances (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  template_id INTEGER,
  task_id INTEGER,
  generated_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (template_id) REFERENCES templates (id),
  FOREIGN KEY (task_id) REFERENCES tasks (id)
);
```

### Componenti da Creare
```
client/src/components/templates/
├── TemplateManager.tsx       # Lista template con azioni
├── TemplateEditor.tsx        # Form creazione/modifica
├── RecurrenceScheduler.tsx   # Configurazione ricorrenze
└── TemplatePreview.tsx       # Anteprima template

server/routes/
└── templates.ts              # API endpoints

server/services/
├── templateService.ts        # Business logic
└── cronService.ts            # Gestione job ricorrenti
```

## 📋 **Task List Sprint 2**

### Fase 1: Database & Backend (Giorno 1)
- [ ] Aggiornare schema SQLite
- [ ] Creare migration script
- [ ] Implementare routes/templates.ts
- [ ] Implementare templateService.ts
- [ ] Testing API endpoints

### Fase 2: Cron Service (Giorno 2)
- [ ] Installare node-cron dependency
- [ ] Implementare cronService.ts
- [ ] Sistema di placeholder engine
- [ ] Testing generazione automatica

### Fase 3: Frontend Components (Giorno 3)
- [ ] TemplateManager.tsx
- [ ] TemplateEditor.tsx
- [ ] Integrazione con routing esistente

### Fase 4: Ricorrenze & UI (Giorno 4)
- [ ] RecurrenceScheduler.tsx
- [ ] TemplatePreview.tsx
- [ ] Integrazione con TaskModal

### Fase 5: Testing & Polish (Giorno 5)
- [ ] Integration testing
- [ ] UI/UX refinements
- [ ] Documentazione
- [ ] Demo preparation

## 🔧 **Dependencies da Aggiungere**

```json
{
  "dependencies": {
    "node-cron": "^3.0.3",
    "handlebars": "^4.7.8",
    "date-fns": "^3.6.0"
  },
  "devDependencies": {
    "@types/node-cron": "^3.0.11"
  }
}
```

## 📊 **Metriche Obiettivo**

- **Template Creation Time**: < 2 minuti
- **Auto-generation Accuracy**: > 95%
- **UI Response Time**: < 200ms
- **Test Coverage**: > 80%

---

## 🚀 **Getting Started**

Per iniziare lo Sprint 2:
1. Installare nuove dependencies
2. Aggiornare database schema
3. Implementare backend APIs
4. Creare frontend components
5. Integrare con sistema esistente

---

**Status**: 🟡 **IN PROGRESS**  
**Next Update**: Fine Giornata 1
